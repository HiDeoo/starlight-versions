---
import Default from '@astrojs/starlight/components/Sidebar.astro'
import type { Props } from '@astrojs/starlight/props'
import starlightConfig from 'virtual:starlight/user-config'
import starlightVersionsConfig from 'virtual:starlight-versions-config'

import { getVersionFromSlug, getVersionSidebar } from '../libs/versions'

const sidebar = getVersionSidebar(
  getVersionFromSlug(starlightVersionsConfig, starlightConfig, Astro.props.entry.slug),
  Astro.props.sidebar,
)
---

<Default {...Astro.props} {sidebar}><slot /></Default>
